						***访问信息***



x86-64整数寄存器

![](..\img\整数寄存器.jpg)

如图所示，指令可以对这16个寄存器的低位字节中存放的不同大小的数据进行操作。字节级操作可以访问最低的字节，16位操作可以访问最低的2个字节，32位操作可以访问最低的4个字节，而64位操作可以访问整个寄存器。

对于生成小于8字节结果的指令，寄存器中剩下的字节会怎么样，对此有两条规则：

生成1字节和2字节数字的指令会保持剩下的字节不变；

生成4字节数字的指令会把高4位字节置为0.



在常见的程序中，不同的寄存器扮演不同的角色。其中最特别的是指针%rsp，用来指明运行时栈的结束位置。有些程序会明确的读写这个寄存器。另外15个更加灵活。



不同的操作数的可能性可以分为三种类型：

***立即数(innediate)***，用来表示常数。在ATT格式的汇编代码中，立即数的书写方式是'$'后面跟一个用标准C表示法表示的整数，比如，$-577或$0x1F。不同的指令允许的立即数范围不同，汇编器会自动选择最紧凑的方式进行数值编码。

***寄存器(register)***，它表示某个寄存器的内容，16个寄存器的地位1字节，2字节，4字节或8字节中的一个作为操作数，这些字节分别对应于8位、16位、32位或64位。

***内存引用***，它会根据计算出来的地址(通常称为有效地址)访问某个内存位置。



多种不同的寻址模式：



![](..\img\寻址模式.jpg)



最频繁使用的指令是将数据从一个位置复制到另一个位置的指令。操作数表示的通用性使得一条简单的数据传送指令能够完成许多机器中要好几条不同指令才能完成的功能。

![](..\img\数据传送指令.jpg)

源操作数指定的值是一个立即数，存储在寄存器中或者内存中。目的操作数指定一个位置，要么是一个寄存器或者，要么是一个内存地址。



当movl指令以寄存器作为目的时，它会把该寄存器的高位4字节设置为0.

 



图3-5和图3-6记录的是两类数据移动指令，在将较小的源值复制到较大的目的时使用。所有这些指令都把数据从源(在寄存器的内存中)复制到目的寄存器。MOVZ类的指令把目的中剩余的字节填充为0，而MOVS类中的指令通过符号扩展来填充，把源操作的最高位进行复制。





![](..\img\扩展指令.jpg)



​	最后两个数据传送操作可以将数据压入程序栈中，以及从程序栈中弹出数据，如图所示。



![](..\img\入栈和出栈.jpg)



讲一个四字值压入栈中，首先要将栈指针减8，然后将值写到新的栈顶地址。














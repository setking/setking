									***物理和虚拟寻址***



虚拟内存是硬件异常、硬件地址翻译、主存、磁盘文件和内核软件的完美交互，它为每个进程提供了一个大的、一致的和私有的空间。

虚拟内存提供了三个重要的能力：

​	1) 它将主存看成是一个存储在磁盘上的地址空间的高速缓存，在主存中只保存活动区域，并根据需要在磁盘和主存之间来回传递数据，通过这种方式，它高效地使用了主存。

​	2) 它为每个进程提供了一致的地址空间，从而简化了内存管理

​	3) 它保护了每个进程的地址空间不被其他进程破坏。



为什么要理解虚拟内存：

- ***虚拟内存是核心的***。虚拟内存遍及计算机系统的所有层面，在硬件异常、汇编器、链接器、加载器、共享对象、文件和进程的设计中扮演着重要角色。理解虚拟内存能更好的理解系统通常是如何工作的。
- ***虚拟内存是强大的***。虚拟内存给予应用程序强大的能力，可以创建和销毁内存片(chunk)、将内存片映射到磁盘文件的某个部分，以及与其他进程共享内存。
- ***虚拟内存是危险的***。每次应用程序引用一个变量、间接引用一个指针， 或者调用一个诸如mallco这样的动态分配程序时，它就会和虚拟内存发生交互。如果虚拟内存使用不当，应用将遇到复杂的与内存有关的错误。







物理寻址：计算机系统的主存被组织成一个由M个连续的字节大小的单元组成的数组。每字节都有一个唯一的物理地址(Physical Address, PA)。

虚拟寻址：CPU通过生成一个虚拟地址(Virtual Address, VA)来访问主存，这个虚拟地址在被送到内存之前先转换成适当的物理地址。将一个虚拟地址转换为物理地址的任务叫做地址翻译(address translation)。


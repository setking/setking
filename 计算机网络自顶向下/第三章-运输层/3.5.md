                                                                    TCP连接

    TCP被称为是面向连接的，当一个应用进程可以开始向另一个应用进程发送数据之前，这两个进程必须先相互"握手"。

    TCP连接提供的是全双工服务： 如果一台主机上的进程A与另一台主机上的进程B存在一条TCP连接，那么应用层数据就可在从进程B流向进程A的同时，也从进程A流向进程B。TCP连接也总是点对点的，即在单个发送方与单个接收方之间的连接。所谓”多播“，即在一次发送操作中，从一个发送方将数据传送给多个接收方，对TCP来说这是不可能的。


    客户首先发送一个特殊的TCP报文段，服务器用另一个特殊的TCP报文段来响应，最后，客户再用第三个特殊报文段作为响应。前两个报文段不承载”有效载荷“，也就是不包含应用层数据；而第三个报文段可以承载有效载荷。这种连接的建立过程被称为三次握手
    TCP可从缓存中取出并放入报文段中的数据量受限于最大报文段长度(MSS)。MSS通常根据最初确定的由本地发送主机发送的最大链路层帧长度(即所谓的最大传输单元(MTU))来设置。
    TCP报文段结构：

                                    32比特
            ------------------------------------------------
            |
            |   源端口号                目的端口号
            |
            |               序号
            |
            |              确认号
            |
            |   首部 保留 U A P R S F   接受窗口
            |   长度 未用 R C S S Y I
            |            G K H T N N
            |   因特网检验和            紧急数据指针
            |               选项
            |               数据
            |------------------------------------------------

    TCP报文首部还包含下列字段：
        -32比特的序号字段和32比特的确认号字段。这些字段被TCP发送方和接受方用来实现可靠数据传输服务。
        -16比特的接收窗口字段，该字段用于流量控制。该字段用于指示接收方愿意接收的字节数量。
        -4比特的首部长度字段，该字段指示了以32比特的字为单位的TCP首部长度。由于TCP选项字段的原因，TCP首部的长度是可变的。
        -可选与变长的的选项字段，该字段用于发送方与接收方协商最大报文段长度时，或在高速网络环境下用作窗口调节因子时使用。首部字段中还定义了一个时间戳选项。
        -6比特的标志字段。ACK比特用于指示确认字段中的值是有效的，即该报文段包括一个对已被成功接收报文段的确认。RST,SYN和FIN比特用于连接建立和拆除，当PSH比特被设置时，就指示接收方应立即将数据交给上层。最后，URG比特用来指示报文段里存在着被发送端的上层实体置为”紧急“的数据。紧急数据的最后一个字节由16比特的紧急数据指针字段指出。当紧急数据存在并给出指向紧急数据尾的指针时，TCP必须通知接收端的上层实体。

    TCP把数据看成一个无结构的、有序的字节流。

    主机A填充进报文段的确认号是主机A期望从主机B收到下一字节的序号。

    TCP往返时间(RTT)，即从一个报文段发出到它被确认的时间。

    指数加权移动平均(EWMA)